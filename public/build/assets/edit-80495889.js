import{_ as b,u as w,e as r,g as x,h as u,r as i,o as y,c as g,a as l,w as p,i as C,l as v,f as s}from"./app-0cc19bc4.js";import{u as D}from"./use-menu-f94f9720.js";const S={setup(){D().onSelectKeys(["admin-schedules-edit"]);const o=w(),d=r({}),t=r([{}]),c=r([{}]),a=x({movie:void 0,room:void 0,showtime:""}),n=e=>{console.log(e.toLowerCase())},m=e=>e&&e<u().endOf("day");return(()=>{v.get(`/api/schedule/${o.params.id}/edit`).then(e=>{t.value=e.data.listMovie,c.value=e.data.listRoom,a.movie=e.data.schedule.movie_id,a.room=e.data.schedule.room_id,a.showtime=u(e.data.schedule.showtime)})})(),{dayjs:u,schedule:a,errors:d,options:t,optionsRoom:c,disabledDate:m,updateSchedule:async()=>{v.put(`/api/schedule/${o.params.id}`,a).then(e=>{e.status==200&&(history.back(-1),d.value=""),console.log(e)}).catch(e=>{e.response.status===422&&(d.value=e.response.data.errors),console.log(d.value)})},filterOption:n}}},k=["form"],M={class:"row"},H={class:"col-12 col-sm-10"},R={class:"row mb-3"},Y=s("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Chọn phim: ")])],-1),j={class:"col-12 col-sm-5"},B={class:"row mb-3"},U=s("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Chọn phòng: ")])],-1),V={class:"col-12 col-sm-5"},L={class:"row mb-3"},N=s("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[s("label",null,[s("span",{class:"text-danger me-1"},"*"),s("span",null,"Thời gian chiếu: ")])],-1),O={class:"col-12 col-sm-5"},T={class:"row"},E={class:"col-12 d-grid d-sm-flex justify-content-sm-end mx-auto"},K=s("span",null,"Lưu",-1);function q(f,o,d,t,c,a){const n=i("a-select"),m=i("a-date-picker"),h=i("a-button"),_=i("a-card");return y(),g("form",{onSubmit:o[3]||(o[3]=C((...e)=>t.updateSchedule&&t.updateSchedule(...e),["prevent"])),form:t.schedule},[l(_,{title:"Thêm lịch chiếu phim mới",style:{width:"100%"}},{default:p(()=>[s("div",M,[s("div",H,[s("div",R,[Y,s("div",j,[l(n,{value:t.schedule.movie,"onUpdate:value":o[0]||(o[0]=e=>t.schedule.movie=e),"show-search":"",placeholder:"Chọn phim",style:{width:"100%"},options:t.options,"filter-option":!1,"field-names":{label:"name",value:"id"}},null,8,["value","options"])])]),s("div",B,[U,s("div",V,[l(n,{value:t.schedule.room,"onUpdate:value":o[1]||(o[1]=e=>t.schedule.room=e),"show-search":"",placeholder:"Chọn phòng",style:{width:"100%"},options:t.optionsRoom,"filter-option":!1,"field-names":{label:"name",value:"id"}},null,8,["value","options"])])]),s("div",L,[N,s("div",O,[l(m,{value:t.schedule.showtime,"onUpdate:value":o[2]||(o[2]=e=>t.schedule.showtime=e),format:"YYYY-MM-DD HH:mm:ss",placeholder:"Chọn thời gian",style:{width:"100%"},"disabled-date":t.disabledDate,"show-time":{defaultValue:t.dayjs("00:00:00","HH:mm:ss")}},null,8,["value","disabled-date","show-time"])])]),s("div",T,[s("div",E,[l(h,{type:"primary","html-type":"submit",class:"me-0 me-sm-3 mb-3 mb-sm-0"},{default:p(()=>[K]),_:1}),l(h,{type:"primary"})])])])])]),_:1})],40,k)}const F=b(S,[["render",q]]);export{F as default};
