import{u as S}from"./use-menu-f94f9720.js";import{_ as U,e as b,g as N,r as l,o as r,c as i,a as n,w as u,i as I,l as f,f as e,t as d,j as m,k as M}from"./app-0cc19bc4.js";import{C as y}from"./helper-35d4951d.js";const V={setup(){S().onSelectKeys(["admin-movies-create"]);const t=b({}),p=b([{}]),s=N({name:"",slug:"",file:null,descrition:"",release_date:"",categories:[],director:"",running_time:""}),v=o=>{console.log(o),s.file=o},g=o=>{s.slug=y(o.target.value),console.log(y(o.target.value))},_=async()=>{const o=new FormData;o.append("name",s.name),o.append("slug",s.slug),o.append("file",s.file),o.append("descrition",s.descrition),o.append("release_date",s.release_date),o.append("categories",JSON.stringify(s.categories)),o.append("director",s.director),o.append("running_time",s.running_time),f.post("/api/movie",o,{headers:{"Content-Type":"multipart/form-data"}}).then(c=>{c.status==200&&(Object.assign(s,{name:"",slug:"",file:null,descrition:"",release_date:"",director:"",running_time:""}),t.value=""),console.log(c)}).catch(c=>{c.response.status===422&&(t.value=c.response.data.errors),console.log(t)})};return(async()=>{f.get("api/movie/create").then(o=>{p.value=o.data})})(),{movie:s,errors:t,options:p,create:_,updateSlug:g,uploadImage:v}}},j=["form"],B={class:"row"},D={class:"col-12 col-sm-8"},L={class:"row mb-3"},O=e("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Tên phim: ")])],-1),E={class:"col-12 col-sm-5"},F={key:0,class:"text-danger"},J={class:"row mb-3"},K=e("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Slug phim: ")])],-1),q={class:"col-12 col-sm-5"},z={key:0,class:"text-danger"},A={class:"row mb-3"},G=e("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Mô tả: ")])],-1),H={class:"col-12 col-sm-5"},P={key:0,class:"text-danger"},Q={class:"row mb-3"},R=e("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Ngày phát hành: ")])],-1),W={class:"col-12 col-sm-5"},X={key:0,class:"text-danger"},Y={class:"row mb-3"},Z=e("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Thể loại: ")])],-1),$={class:"col-12 col-sm-5"},ee={class:"row mb-3"},se=e("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Tác giả: ")])],-1),te={class:"col-12 col-sm-5"},oe={key:0,class:"text-danger"},ae={class:"row mb-3"},ne=e("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Thời lượng: ")])],-1),le={class:"col-12 col-sm-5"},re=e("span",null," (min)",-1),ie={key:0,class:"text-danger"},ce={class:"row mb-3"},de=e("div",{class:"col-12 col-sm-3 text-start text-sm-end mb-1"},[e("label",null,[e("span",{class:"text-danger me-1"},"*"),e("span",null,"Ảnh bìa phim: ")])],-1),me={class:"col-12 col-sm-5"},_e=e("i",{class:"fa-solid fa-upload"},null,-1),ue=e("span",{class:"ms-2"},"Chọn ảnh",-1),pe={key:0,class:"text-danger"},ve={class:"row"},ge={class:"col-12 d-grid d-sm-flex justify-content-sm-end mx-auto"},he=e("span",null,"Lưu",-1);function xe(w,t,p,s,v,g){const _=l("a-input"),h=l("a-textarea"),o=l("a-date-picker"),c=l("a-select"),k=l("a-input-number"),x=l("a-button"),T=l("a-upload"),C=l("a-card");return r(),i("form",{onSubmit:t[7]||(t[7]=I((...a)=>s.create&&s.create(...a),["prevent"])),form:s.movie},[n(C,{title:"Thêm phim mới",style:{width:"100%"}},{default:u(()=>[e("div",B,[e("div",D,[e("div",L,[O,e("div",E,[n(_,{placeholder:"Tên danh mục",value:s.movie.name,"onUpdate:value":t[0]||(t[0]=a=>s.movie.name=a),onInput:s.updateSlug,"allow-clear":""},null,8,["value","onInput"]),s.errors.name?(r(),i("span",F,d(s.errors.name[0]),1)):m("",!0)])]),e("div",J,[K,e("div",q,[n(_,{placeholder:"slug",value:s.movie.slug,"onUpdate:value":t[1]||(t[1]=a=>s.movie.slug=a),"allow-clear":""},null,8,["value"]),s.errors.slug?(r(),i("span",z,d(s.errors.slug[0]),1)):m("",!0)])]),e("div",A,[G,e("div",H,[n(h,{value:s.movie.descrition,"onUpdate:value":t[2]||(t[2]=a=>s.movie.descrition=a),placeholder:"Mô tả",rows:4},null,8,["value"]),s.errors.descrition?(r(),i("span",P,d(s.errors.descrition[0]),1)):m("",!0)])]),e("div",Q,[R,e("div",W,[n(o,{value:s.movie.release_date,"onUpdate:value":t[3]||(t[3]=a=>s.movie.release_date=a)},null,8,["value"]),s.errors.release_date?(r(),i("span",X,d(s.errors.release_date[0]),1)):m("",!0)])]),e("div",Y,[Z,e("div",$,[n(c,{value:s.movie.categories,"onUpdate:value":t[4]||(t[4]=a=>s.movie.categories=a),mode:"multiple",placeholder:"Inserted are removed",style:{width:"100%"},options:s.options.map(a=>({value:a.id,label:a.name}))},null,8,["value","options"])])]),e("div",ee,[se,e("div",te,[n(_,{placeholder:"Tên tác giả",value:s.movie.director,"onUpdate:value":t[5]||(t[5]=a=>s.movie.director=a),"allow-clear":""},null,8,["value"]),s.errors.director?(r(),i("span",oe,d(s.errors.director[0]),1)):m("",!0)])]),e("div",ae,[ne,e("div",le,[n(k,{placeholder:"Thời lượng ",value:s.movie.running_time,"onUpdate:value":t[6]||(t[6]=a=>s.movie.running_time=a),min:"0"},null,8,["value"]),M(),re,s.errors.running_time?(r(),i("span",ie,d(s.errors.running_time[0]),1)):m("",!0)])]),e("div",ce,[de,e("div",me,[n(T,{"list-type":"picture","max-count":1,action:"","before-upload":s.uploadImage},{default:u(()=>[n(x,{"html-type":"button"},{default:u(()=>[_e,ue]),_:1})]),_:1},8,["before-upload"]),s.errors.running_time?(r(),i("span",pe,d(s.errors.running_time[0]),1)):m("",!0)])])])]),e("div",ve,[e("div",ge,[n(x,{type:"primary","html-type":"submit",class:"me-0 me-sm-3 mb-3 mb-sm-0"},{default:u(()=>[he]),_:1})])])]),_:1})],40,j)}const we=U(V,[["render",xe]]);export{we as default};
